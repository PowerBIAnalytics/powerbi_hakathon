# Работа на 5-й хакатон
## Команда "Директ-ПРО"
## Создано по данным группы "Контекстная реклама"


### Задача: 
Сделать объективный рейтинг постов и комментариев, а также удобный поиск по вопросам и ответам в группе Контекстная реклама.

### Этапы решения задачи: 

1) Для удобства поделил основную вкладку на 3 таблицы: Посты, Комментарии1 и Комментарии2.

2) Лайк каждого человека имеет разный вес. 
Сначала составляем рейтинг: кто набрал больше лайков. 
Добавляем к весу пользователя 1 лайк на 1000 полученных. 
Теперь лайки некоторых пользователей весят больше. 
Это закладывается в "рейтинг".

3) Для простоты берём так:
- посты в качестве вопросов,  
- комментарии 1 уровня в качестве ответов. 

4) Если у поста есть 3 залайканных ответа, этого достаточно чтобы дать ответ на вопрос. Чтобы их получить, используем RANKX и берем от 1 до 3. Проблема в том что рейтинги повторяются и из-за этого бывает не 3 ответа, а больше. Но если на них достаточно лайков, то рейтинги будут отличаться и будет ТОП-3 ответа.

5) Считаем вопросами те посты, которые содержат "?".

6) Категоризируем посты по наличию слов типа adwords, директ, gtm итд.

7) Разбиваем тексты постов по словам.

8) Находим бесполезные слова типа: что, куда, себя, их, коллеги, подскажите, итд. Убираем их из разбивки.

9) Убираем из разбивки слова, которые используются 1-2 раза за все годы.

Теперь нам доступен поиск вопросов по словам, которые являются актуальными, тематическими и позволят найти нужную инфу.

10) Лемматизируем оставшиеся слова в Директ-ПРО, затягиваем по ссылке из директ-про.рф. Теперь нам доступен поиск по леммам.

11) Дважды копируем табличку слов: слова, слова2, слова3. Теперь у нас есть 3 фильтра - мы можем постепенно сужать область поисков.

### В результате получили: 

1) Рейтинги пользователей + Рейтинги постов с учётом веса пользователя
2) Поиск по постам с тремя фильтрами слов и категоризацией, с выдачей ТОП-3 залайканных ответов
3) Динамику задавания вопросов и рейтингов с фильтрами слов и категорий (планируется по ней отслеживать реакции на новости в контексте)

### Выводы:

Система поможет новичкам определить лидеров в группе, изучить содержание их постов. 
Также новички смогут по заданным словам (леммам) производить поиск интересных вопросов и смотреть ответы. 
Если доделать динамику, можно объединить данные по новостям в контекстной рекламе и реакцией на них, что также может быть интересно.

### Список основных таблиц:

- Категории - категоризация по словам
- Слова - фильтр по леммам,
- Слова2 - фильтр по леммам,
- Слова3 - фильтр по леммам,
- Пасты - посты,
- Каменты1 - комментарии 1 уровня,
- Каменты2 - комментарии 2 уровня,
- Вопрос-Не вопрос - определение списка постов которые являются вопросами,
- Лайки - количество лайков от автора к посту,
- Юзеры - список пользователей с именами,
- Вопросы * - список постов с вопросами,
- Топ ответов * - список топовых ответов на посты-вопросы,
- Ответы - все ответы на посты-вопросы,
- Авторы и Пасты - соотнесение авторов и постов,
- Пасты и Каменты - тип и ID поста/коммента,
- Рейтинг Записи - список постов/комментов с рейтингом,
- Рейтинг Юзера - список пользователей + данные по лайкам на их посты.

